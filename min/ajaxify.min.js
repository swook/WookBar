/*!
   jQuery WookBar for Blogger
   - Ajaxify
 */
WB.load=function(a){a=$.Ajaxify.parseUri(a);if(a.full!=$.Ajaxify.current_url.full){WB.showProgress()}WB.fadeOut();WB.Ajaxify.BloggerLoad(a)};WB.Ajaxify={init:function(){$.Ajaxify.all()},pageChange:function(){WB.endProgress();WB.fadeOut();var a;$.each(WB.data.items,function(b,c){if(c.link==$.Ajaxify.current_url.full){a=c.title;return}});if(!a){a=(document.title==WB.blog.title)?"":document.title}$("#mynavbar .page").html(a).attr("href",$.Ajaxify.current_url.full);$(".tabs-inner li").each(function(){var c=$(this),b=$("a",c).attr("href");if(b){if(b==document.location.href){c.addClass("selected")}else{c.removeClass("selected")}}});if("social" in WB){WB.social.load.all()}},onClick:function(b){if(($.browser.msie&&b.button!=1)||(!$.browser.msie&&b.button!=0)||(b.ctrlKey)){return}b.preventDefault();var a=$.Ajaxify.parseUri($(this).attr("href"));if((a.full in WB.data.urls)||a.path==""||a.path=="/"||a.path=="/search"){WB.Ajaxify.BloggerLoad(a)}else{$.Ajaxify.loadURL(a)}},BloggerLoad:function(a){if($.Ajaxify.current_url.full==a.full){$.Ajaxify.gotoAnchor(a.anchor);return}var b,c;if(a.path==""||a.path=="/"||a.path=="/search"){c=WB.blog.title}else{b=WB.data.items[WB.data.urls[a.full]],c=(b.title=="About")?"Seon-Wook Park":b.title}document.title=c;history.pushState({url:a,title:c},c,a.relative);$.Ajaxify.init();WB.Ajaxify.applyData(a,b);setTimeout($.get(a.full+"?dynamicviews=1&v=0"),0)},applyData:function(a,b){if(a.path==""||a.path=="/"){WB.Ajaxify.home()}else{if(a.path=="/search"){WB.Ajaxify.pager(a)}else{if(a.full in WB.data.urls){b=WB.data.items[WB.data.urls[a.full]];$("#Blog1").empty();$("#Blog1").html(WB.Ajaxify.tmpl.compile.body(b,b.type=="post"))}}}$("#Blog1 div.blogger-post-footer").remove();$("#Label1 span span[dir=ltr]").each(function(f,g){var d=$(g),c=d.html();d.replaceWith('<a dir="ltr" href="'+WB.blog.homepage+"search/label/"+c+'">'+c+"</a>");$.Ajaxify.applyTo(d)});$("#Blog1 a[target!=_blank]:not(.noajax)").each($.Ajaxify.applyTo);$.Ajaxify.pageChange_run();$.Ajaxify.gotoAnchor(a.anchor)},tmpl:{getDay:function(a){switch(a){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}},getMonth:function(a){switch(a){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December"}},parse:{uriParams:function(a){a.params={};a.query.split("&").map(function(b){b=b.split("=");if(b.length==2){a.params[b[0]]=b[1].replace(/\+/g," ")}else{a.params[b[0]]==null}});if("max-results" in a.params){a.params["max-results"]=parseInt(a.params["max-results"])}if("reverse-paginate" in a.params){a.params["reverse-paginate"]=(a.params["reverse-paginate"]=="true")}if("updated-max" in a.params){a.params["updated-max"]=new Date(decodeURIComponent(a.params["updated-max"]))}return a}},compile:{uriParams:function(a){if(!("params" in a)){return""}var c=a.protocol+"://"+a.host+a.path+"?",b=[];for(key in a.params){b.push(key+"="+a.params[key])}return c+b.join("&")},bloggerTime:function(a){var b=a.toISOString();return b.slice(0,b.length-5)+"Z"},date:function(a){return'<h2 class="date-header"><span>'+WB.Ajaxify.tmpl.getDay(a.date.getUTCDay())+", "+a.date.getUTCDate()+" "+WB.Ajaxify.tmpl.getMonth(a.date.getUTCMonth())+" "+a.date.getUTCFullYear()+"</span></h2>"},body:function(d,a,b){b=(b)?b:"content";var c='<div class="blog-posts hfeed"><div class="date-outer">';if(a){c+=WB.Ajaxify.tmpl.compile.date(d)}c+='<div class="date-posts"><div class="post-outer"><div class="post hentry">';if(d.type=="post"){c+='<h3 class="post-title entry-title">';if(b=="contentLess"){c+='<a href="'+d.link+'">'}c+=d.title;if(b=="contentLess"){c+="</a>"}c+='</h3><div class="post-header"><div class="post-header-line-1"><span class="post-author vcard">by <span class="fn"><a href="/p/about.html">Seon-Wook Park</a></span></span></div></div>'}c+='<div class="post-body entry-content">'+d[b]+"</div>";if(d.more&&b=="contentLess"){c+='<div class="jump-link"><a href="'+d.link+'#more" title="'+d.title+'">Continue Reading â†’</a></div>'}c+='<div class="post-footer"><div class="post-footer-line post-footer-line-1"><div class="post-share-buttons goog-inline-block"><div addthis:description="..." addthis:title="'+d.title+'" addthis:url="'+$.Ajaxify.current_url.full+'" class="addthis_toolbox addthis_default_style" style="width: 150px;"><a class="addthis_button_preferred_1"></a><a class="addthis_button_preferred_2"></a><a class="addthis_button_preferred_3"></a><a class="addthis_button_preferred_4"></a><a class="addthis_button_compact"></a></div></div></div><div class="post-footer-line post-footer-line-2"><span class="post-comment-link"><a class="comment-link" href="'+d.link+'#comments"></a></span>';if(d.type=="post"&&d.labels.length>0){c+='<span class="post-labels">Tags: ';$.each(d.labels,function(f,e){if(f>0){c+=", "}c+='<a href="'+WB.blog.homepage+"search/label/"+e+'" rel="tag">'+e+"</a>"});c+="</span>"}c+='</div><div class="post-footer-line post-footer-line-3"></div></div></div>';if(b=="content"){c+='<div class="comments" id="comments"></div>'}c+="</div></div></div>";return c},index:function(c){var e,d,a,b="";c.forEach(function(f){d=WB.data.items[f],a=false;if(e){if(e.getUTCDay()!=d.date.getUTCDay()){e=d.date;a=true}else{if(e.getUTCDate()!=d.date.getUTCDate()){e=d.date;a=true}else{if(e.getUTCFullYear()!=d.date.getUTCFullYear()){e=d.date;a=true}}}}else{e=d.date,a=true}b+=WB.Ajaxify.tmpl.compile.indexItem(d,a)});return b},indexItem:function(c,b){if(!("contentLess" in c)){var a=c.content.indexOf("<a name='more'></a>");c.more=(a>-1);if(c.more){c.contentLess=c.content.substr(0,a)}else{return WB.Ajaxify.tmpl.compile.body(c,b,"content")}}return WB.Ajaxify.tmpl.compile.body(c,b,"contentLess")},pager:function(a,e,c){var b='<div class="blog-pager" id="blog-pager">',d={};if("max-results" in a.params){d["max-results"]=a.params["max-results"]}if(e.id>0){b+='<span id="blog-pager-newer-link"><a class="blog-pager-newer-link" href="';if(e.id>a.params["max-results"]){d["updated-max"]=WB.Ajaxify.tmpl.compile.bloggerTime(WB.data.items[WB.blog.pages[e.id-a.params["max-results"]-1]].date);d["reverse-paginate"]=true,a.params=d;b+=WB.Ajaxify.tmpl.compile.uriParams(a)}else{b+=WB.blog.homepage}b+='" id="Blog1_blog-pager-newer-link" title="Newer Posts">Newer Posts</a></span>'}if(c.id<WB.blog.posts.length-1){d["updated-max"]=WB.Ajaxify.tmpl.compile.bloggerTime(c.date);a.params=d;b+='<span id="blog-pager-older-link"><a class="blog-pager-older-link" href="'+WB.Ajaxify.tmpl.compile.uriParams(a)+'" id="Blog1_blog-pager-older-link" title="Older Posts">Older Posts</a></span>'}b+="</div>";return b}}},home:function(){var a=[],b=$.extend({},$.Ajaxify.parseUri(WB.blog.homepage)),d=4;b.path="/search";b.params={"max-results":d};for(var c=0;c<WB.blog.posts.length;c++){if(a.push(WB.blog.posts[c])==d){break}}html=WB.Ajaxify.tmpl.compile.index(a);html+=WB.Ajaxify.tmpl.compile.pager(b,WB.data.items[a[0]],WB.data.items[a[a.length-1]]);$("#Blog1").empty();$("#Blog1").html(html)},pager:function(d){d=$.extend({},WB.Ajaxify.tmpl.parse.uriParams(d));var f,a,g,c=[],h=d.params["max-results"],b=("updated-max" in d.params)?d.params["updated-max"]:new Date();for(var e=0;e<WB.data.items.length;e++){g=WB.data.items[e];if((g.type=="post")&&(g.date<b)){c.push(e)}if(c.length==h){break}}f=WB.Ajaxify.tmpl.compile.index(c);f+=WB.Ajaxify.tmpl.compile.pager(d,WB.data.items[c[0]],WB.data.items[c[c.length-1]]);$("#Blog1").empty();$("#Blog1").html(f)}};$.Ajaxify.onClick=WB.Ajaxify.onClick;$.Ajaxify.pageChange(WB.Ajaxify.pageChange);$(document).ready(WB.Ajaxify.init);