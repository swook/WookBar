/*! WookBar by Seon-Wook Park (www.swook.net) | CC BY-NC-SA */
/*! WookBar by Seon-Wook Park (www.swook.net) | CC BY-NC-SA | core.js */(function(e,t,n){var r=e.util,i={onParse:function(){s.init(),u.core.init()},onReady:function(){var e=_WidgetManager._GetAllData().blog;s.blog={title:e.title,homepage:e.canonicalHomepageUrl,id:blogger_blog_id},u.core.fillDetails(),a.attachAll()}};e.init=i;var s={persistentKeys:["etag","blog","page","post"],ready:!1,page:[],post:[],init:function(){s.load(),s.getFeedData()},save:function(){if(!t.jStorage.storageAvailable())return;var e={};t.each(s.persistentKeys,function(t,n){e[n]=s[n]}),t.jStorage.set("WB",e)},load:function(){var e=t.jStorage.get("WB");if(!e)return;t.each(e,function(e,t){s.persistentKeys.indexOf(e)>-1&&(s[e]=t)})},getFeedData:function(){var e=function(e,n){var r;t.each(e,function(e,i){r={},r.id=e,r.date=new Date(i.published.$t),r.title=i.title.$t,r.content=i.content.$t,r.link=i.link[i.link.length-1].href,r.labels=[],r.labelsLower=[],"media$thumbnail"in i&&(r.thumbnail=i.media$thumbnail.url),i.category&&t.each(i.category,function(e,t){r.labels.push(t.term),r.labelsLower.push(t.term.toLowerCase())}),s[n].push(r)}),r=null},n={page:!1,post:!1},i=function(o,u){var a;t.getJSON("/feeds/"+o+"s/default?orderby=published&v=2&dynamicviews=1&alt=json",function(t){a=t.feed.gd$etag,a!=s.etag&&e(t.feed.entry,o),n[o]=!0,n[u]==1&&(a!=s.etag&&(s.etag=t.feed.gd$etag,s.save()),s.ready=!0),t=null}).error(function(e){r.setDelay(i,500,o,u)})};i("post","page"),i("page","post")}};e.data=s;var o={};e.elem=o;var u={core:{init_done:!1,init:function(){t('<div id="WB"><ul><li class="appmenu"><div class="bar-bg"><div class="bg"/><div class="onhover"/></div><a class="blogger" href="http://www.blogger.com/" title="Go to Blogger.com"></a><a class="title"></a><div class="menu"><hr/>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div></li><li class="crumb"><a href="/">Home</a></li><li class="search"><form action="/search"><input name="q" type="text" placeholder="Search "><input value type="submit"></form><div class="results"><div class="result">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div></div></li></ul></div>').insertBefore(t("#navbar")),o.main=t("#WB"),o.appmenu={main:t("li.appmenu",o.main)},o.appmenu.title=t("a.title",o.appmenu.main),o.search={main:t("li.search",o.main)},o.search.form=t("form",o.search.main),o.search.input=t("input[type=text]",o.search.form),u.core.init_done=!0,u.core.fillDetails()},filledDetails:!1,fillDetails:function(){if(!(!u.core.filledDetails&&"blog"in s))return;o.appmenu.title.html(s.blog.title).attr("href",s.blog.homepage),o.search.input.attr("placeholder","Search "+s.blog.title),u.core.reveal(),u.core.filledDetails=!0},reveal:function(){document.referrer.length&&r.parseURL().host==r.parseURL(document.referrer).host?o.main.show():o.main.fadeIn()}}};e.UI=u;var a={attachAll:function(){o.main.click(a.main.click)},main:{click:function(e){e.stopPropagation()}}};i.onParse(),t(document).ready(i.onReady)})(window.WB=window.WB||{},jQuery);

